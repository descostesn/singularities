BootStrap: debootstrap
OSVersion: bionic
MirrorURL: http://us.archive.ubuntu.com/ubuntu/

%help
    This singularity install fasterq-dump 2.10.8 from sra-toolkit.

%post

    # ~~~~~~ General setup and folder creation ~~~~~~ #
    
    apt-get update && apt-get install -y wget build-essential checkinstall \
    libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev \
    libgdbm-dev libc6-dev libbz2-dev
    
    # ~~~~~ Python 3.5.9 ~~~~~ #
    cd /opt
    wget https://www.python.org/ftp/python/3.5.9/Python-3.5.9.tgz && \
    tar xzf Python-3.5.9.tgz && rm Python-3.5.9.tgz && cd Python-3.5.9 && \
    ./configure --enable-optimizations && make altinstall
    cd
    
    # ~~~~~ MINICONDA ~~~~~ #
    wget https://repo.anaconda.com/miniconda/Miniconda3-4.7.12.1-Linux-x86_64.sh && \
    bash Miniconda3-4.7.12.1-Linux-x86_64.sh -b -p /conda && \
    rm -f Miniconda3-4.7.12.1-Linux-x86_64.sh
    export PATH="/conda/bin:${PATH}"
   
    # ~~~~~ parallel-fastq-dump 0.6.3 ~~~~~ #
    conda install -c bioconda parallel-fastq-dump=0.6.3
    
%environment
    export PATH="${PATH}:/conda/bin"

%labels
    Author Nicolas Descostes
    Version v0.0.1
    